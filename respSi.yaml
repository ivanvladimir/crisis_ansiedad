conversations:
  - 'categorizacion.yaml'

strategies:
  resSi:
    - say "Vamos a ensayar el ejercicio de re-entrenamiento de la respiración 🫁. Para explicarlo mejor, he preparado el **siguiente video** donde te daré ejemplos de la técnica que vamos a utilizar. Oprime _play_ para comenzar el vieeo. Si en cualquier momento lo deseas, puedes parar el video y podemos continuar con el siguiente paso 😊."

  set_video:
    - set_slot video_visto False

  ask_video:
    - say "**¿Ya terminaste el ejercicio?**"
    - say "Escribe Si o No 😊"
    - input res_video_visto | yesno
    - set_slot video_visto True
    - if res_video_visto then solve set_video

  cinco_cosas:
    - say "Muy bien,   es importante que sepas que después de una situación difícil y peligrosa, es normal experimentar ansiedad, recuerdos recurrentes y otros síntomas incómodos."
    - say "Las técnicas para poner los pies sobre la tierra nos ayudan a controlar estos síntomas y nos ayudan a enfocarnos en el presente."
    - say "A continuación haremos la técnica  5-4-3-2-1, la cual nos ayudará a prestar atención en los detalles de lo que nos rodea usando cada uno de los sentidos 👂 ✋ 👃 👁️ 👄"
    - say "Te pido por favor que te esfuerces en observar detalles que normalmente ignoramos 👀, como sonidos distantes 🎶 o la textura de un objeto ordinario 🍪"
    - say "**¿Comenzamos?**😊"
    - input cont | yesno
  cinco_cosas_cont:
    - say "Escribe 5 cosas que puedas ver 👁️ 👀 😊... "
    - say "Intenta buscar detalles pequeños tales como el patrón en un techo o la menra en la que luz refleja en la superficie ☀️ 💡"
    - input respuesta
    - say "Escribe 4 cosas que puedas sentir ✋ 🤗 🦶"
    - say " Note la sensación de la ropa sobre su cuerpo, el sol sobre su piel o la sensación de la silla sobre la que está sentado. Escoja un objeto y examine su peso, textura u otras cualidades físicas 👖 👚 🪑"
    - input respuesta
    - say "Escribe 3 cosas que puedas oir 👂 🎶"
    - say "Ponga atención a los sonidos que su mente haya excluido, como el tictac de un reloj o el viento soplando en los árboles ⏰ 🍁 🌲 🎶."
    - input respuesta
    - say "Escribe 2 cosas que puedas oler 👃 ..."
    - say "Intente identificar los olores en el aire a su alrededor, como el aromatizante de aire o pasto recién cortado. También puede buscar algo que huela, como una flor o una vela sin encender 🌸🕯️"
    - input respuesta
    - say "Escribe 1 cosas que puedas saborear 👄..."
    - say "Lleve consigo chicle, dulces o colaciones pequeñas para este paso. Introduzca uno en su boca y enfoque su atención en los sabores 🍬 🍪 🍫"
    - input respuesta
    - say "¡Listo! Lo hiciste muy bien. Espero que te sientas mejor después de haber heccho este ejercicio."
    - say "**¿Deseas continuar la conversación?**"
    - input ask_cont | yesno

script:
  - solve resSi
  - set_slot video_visto True
  - set_slot cont False
  - say VIDEO
  - while video_visto then solve ask_video
  - say "Espero que esta técnica te haya ayudado a sentirte aunque sea un poco mejor 😊💙."
  - say "**¿Te gustaría probar otra técnica de relajación?** 😊 Es importante que realices este ejercicio en un lugar seguro. Si todavía te encuentras en el lugar del accidente, te recomiendo pasar al siguiente paso y omitir esta técnica."
  - input res_ejercicio
  - post zs labelling 'text':res_ejercicio,'texts':['probar otra técnica relajación','continuar siguiente paso','si','no'],'labels':['si','no','si','no'] response_ejercicio
  - set_slot otro_ejercicio response_ejercicio['result']
  - if opcion==1 and otro_ejercicio=='si' then solve cinco_cosas
  - if opcion==1 and otro_ejercicio=='si' and cont==True then solve cinco_cosas_cont
  - if opcion==1 and otro_ejercicio=='si' and cont==False then solve categorizacion
  - if opcion==1 and otro_ejercicio=='si' and ask_cont==True then solve derivacion
  - if opcion==1 and otro_ejercicio=='si' and ask_cont==False then say TERMINAR
  - if opcion==1 and otro_ejercicio=='no' and cont==False then solve categorizacion
  - if opcion==2 then say "Puedes regresar siempre que lo desees a realizar este ejercicio conmigo 😊🫁"
